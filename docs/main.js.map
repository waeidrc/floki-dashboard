{"version":3,"sources":["webpack:///./src/$_lazy_route_resource lazy namespace object","webpack:///./src/app/annotation.service.ts","webpack:///./src/app/annotation/annotation.component.css","webpack:///./src/app/annotation/annotation.component.html","webpack:///./src/app/annotation/annotation.component.ts","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/node-bar-chart/node-bar-chart.component.css","webpack:///./src/app/node-bar-chart/node-bar-chart.component.html","webpack:///./src/app/node-bar-chart/node-bar-chart.component.ts","webpack:///./src/app/taxon.ts","webpack:///./src/app/taxonomy-tree.service.ts","webpack:///./src/app/taxonomy-view/taxonomy-view.component.css","webpack:///./src/app/taxonomy-view/taxonomy-view.component.html","webpack:///./src/app/taxonomy-view/taxonomy-view.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./src/$$_lazy_route_resource lazy recursive\";","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\n\nimport { AntibioticResistance } from './antibiotic-resistance';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnnotationService {\n  private reportUrl = \"./assets/json-reports/ar.json\";\n  \n  constructor(\n    private http: HttpClient\n  ) { }\n\n  private jsonData: AntibioticResistance[];\n\n  private handleError<T> (operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n      console.error(error);\n      console.log(`${operation} failed: ${error.message}`);\n      return of(result as T);\n    };\n  }\n  \n  getJson(): Observable<any> {\n    return this.http.get<any>(this.reportUrl)\n      .pipe(\n\ttap(d => this.jsonData = d),\n\tcatchError(this.handleError('getJson', []))\n      );\n  }\n\n}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Fubm90YXRpb24vYW5ub3RhdGlvbi5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<div class=\\\"row\\\">\\n  <h3>Antibiotic Resistance</h3>\\n</div>\\n<div class=\\\"row\\\">\\n  <div *ngFor=\\\"let sample of arData\\\">\\n    <h2 class=\\\"col-md-12\\\">{{sample[\\\"sample\\\"]}}</h2>\\n    <div *ngFor=\\\"let seq of sample['data']\\\" class=\\\"row shadow-sm p-3 mb-5 bg-white rounded\\\">\\n      <ul class=\\\"list-group col-md-2\\\">\\n  \\t<li class=\\\"list-group-item\\\"><div class=\\\"bg-primary p-3 mb-2\\\">Coverage</div> {{seq[\\\"coverage\\\"] * 100}} %</li>\\n  \\t<li class=\\\"list-group-item\\\"><div class=\\\"bg-primary p-3 mb-2\\\">Per base depth</div> {{seq[\\\"avg_depth_per_base\\\"]}}</li>\\n  \\t<li class=\\\"list-group-item\\\"><div class=\\\"bg-primary p-3 mb-2\\\">NCBI Accession ID</div> {{seq[\\\"ncbi_accession_id\\\"]}}</li>\\n      </ul>\\n      <div *ngFor=\\\"let model of seq['card_data']\\\" class=\\\"col-md-10\\\">\\n\\t<div>\\n      \\t  <h3>{{model[\\\"ARO_name\\\"]}}</h3>\\n      \\t  <p>{{model[\\\"ARO_description\\\"]}}</p>\\n      \\t  <span *ngFor=\\\"let m of model['model_sequences']['sequence'] | keyvalue\\\" class=\\\"badge badge-primary\\\">\\n      \\t    {{m.value[\\\"NCBI_taxonomy\\\"][\\\"NCBI_taxonomy_name\\\"]}}\\n      \\t  </span>\\n      \\t</div>\\n      \\t<span *ngFor=\\\"let category of model['ARO_category'] | keyvalue\\\" class=\\\"float-left\\\">\\n      \\t  <div [ngSwitch]=\\\"category.value['category_aro_class_name']\\\">\\n      \\t    <span class=\\\"badge badge-danger\\\" *ngSwitchCase=\\\"'Resistance Mechanism'\\\">{{category.value[\\\"category_aro_name\\\"]}}</span>\\n      \\t    <span class=\\\"badge badge-success\\\" *ngSwitchCase=\\\"'Antibiotic'\\\">{{category.value[\\\"category_aro_name\\\"]}}</span>\\n      \\t    <span class=\\\"badge badge-success\\\" *ngSwitchCase=\\\"'Drug Class'\\\">{{category.value[\\\"category_aro_name\\\"]}}</span>\\n      \\t    <span class=\\\"badge badge-info\\\" *ngSwitchDefault>{{category.value[\\\"category_aro_name\\\"]}}</span>\\n      \\t  </div>\\n      \\t</span>\\n      </div>\\n      <hr>\\n    </div>\\n  </div>\\n</div>\\n\\n\"","import { Component, OnInit } from '@angular/core';\n\nimport { AntibioticResistance } from '../antibiotic-resistance';\n\nimport { AnnotationService } from '../annotation.service';\n\n@Component({\n  selector: 'app-annotation',\n  templateUrl: './annotation.component.html',\n  styleUrls: ['./annotation.component.css']\n})\nexport class AnnotationComponent implements OnInit {\n\n  constructor(\n    private annotationService: AnnotationService\n  ) { }\n\n  private arData: AntibioticResistance[];\n\n  ngOnInit() {\n    this.annotationService.getJson().subscribe(_ => this.arData = _);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { TaxonomyViewComponent } from './taxonomy-view/taxonomy-view.component';\nimport { AnnotationComponent } from './annotation/annotation.component';\n\nconst routes: Routes = [\n  { path: '', pathMatch: 'full', redirectTo: 'taxonomy' },\n  { path: 'taxonomy', component: TaxonomyViewComponent },\n  { path: 'antibiotic-resistance', component: AnnotationComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FwcC5jb21wb25lbnQuY3NzIn0= */\"","module.exports = \"<nav class=\\\"navbar navbar-expand-lg navbar-light bg-light\\\">\\n  <span class=\\\"navbar-brand mb-0 h1\\\">Floki</span>\\n    <ul class=\\\"navbar-nav mr-auto\\\">\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" routerLink=\\\"/taxonomy\\\">Taxonomy</a></li>\\n      <li class=\\\"nav-item\\\"><a class=\\\"nav-link\\\" routerLink=\\\"/antibiotic-resistance\\\">Antibiotic Resistance</a></li>\\n    </ul>\\n</nav>\\n<div class=\\\"container-fluid\\\">\\n  <!-- <app-taxonomy-view></app-taxonomy-view> -->\\n  <router-outlet></router-outlet>\\n</div>\\n\"","import { Component } from '@angular/core';\nimport { TaxonomyViewComponent } from './taxonomy-view/taxonomy-view.component';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n  title = 'Floki';\n}\n","import { HttpClientModule } from '@angular/common/http';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { TaxonomyViewComponent } from './taxonomy-view/taxonomy-view.component';\nimport { NodeBarChartComponent } from './node-bar-chart/node-bar-chart.component';\nimport { AnnotationComponent } from './annotation/annotation.component';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    TaxonomyViewComponent,\n    NodeBarChartComponent,\n    AnnotationComponent\n  ],\n  imports: [\n    HttpClientModule,\n    BrowserModule,\n    AppRoutingModule,\n    FormsModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","module.exports = \"#chart-wrapper{\\n    width: 100%;\\n    height:100%;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbm9kZS1iYXItY2hhcnQvbm9kZS1iYXItY2hhcnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFlBQVk7SUFDWixZQUFZO0NBQ2YiLCJmaWxlIjoic3JjL2FwcC9ub2RlLWJhci1jaGFydC9ub2RlLWJhci1jaGFydC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI2NoYXJ0LXdyYXBwZXJ7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OjEwMCU7XG59XG4iXX0= */\"","module.exports = \"<h4>{{keyTitle | uppercase}}</h4>\\n<canvas #chartWrapper id=\\\"chart-wrapper\\\"></canvas>\\n\"","import { Component, OnInit, AfterViewInit, OnChanges, SimpleChange, SimpleChanges, HostListener, ViewChild, ElementRef, Input } from '@angular/core';\n\nimport { Taxon } from '../taxon';\n\nimport { ScaleLinear, ScaleBand } from 'd3-scale';\n\nimport * as d3 from 'd3';\nimport * as _ from \"lodash\";\n\n@Component({\n  selector: 'app-node-bar-chart',\n  templateUrl: './node-bar-chart.component.html',\n  styleUrls: ['./node-bar-chart.component.css']\n})\nexport class NodeBarChartComponent implements OnChanges, AfterViewInit, OnInit {\n\n  @ViewChild('chartWrapper') private canvas: ElementRef;\n\n  private cx: CanvasRenderingContext2D;\n  private canvasEl: HTMLCanvasElement;\n\n  @Input() nodeData: Taxon;\n  @Input() key: string;\n  @Input() screenHeight: number;\n  @Input() screenWidth: number;\n\n  private keyTitle: string= \"\";\n\n  private offset: {[id:string]: number} = {\n    \"x\": 50,\n    \"y\": 10\n  };\n  private padding = 20;\n\n  constructor() { }\n\n  ngOnInit(){\n    this.keyTitle = this.key.replace(/_/g, \" \");\n  }\n\n  ngAfterViewInit(){\n    this.setUpCanvas();\n  }\n\n  ngOnChanges(changes: SimpleChanges){\n    if(!_.isEmpty(this.nodeData))\n      this.drawChart();\n  }\n\n  drawChart(): void {\n    this.cx.clearRect(0, 0, this.screenWidth/3, this.screenHeight/4);\n\n    let _width: number = this.screenWidth/3 - 30 - (2 * this.offset.x);\n    let _height: number = this.screenHeight/4 - (2 * this.offset.y) - 50;\n    var _padding = this.padding;\n    let _data = this.nodeData;\n\n    var x: ScaleBand<any> = d3.scaleBand()\n      .rangeRound([0, _width])\n      .padding(0.1);\n    let y: ScaleLinear<number, number> = d3.scaleLinear()\n      .rangeRound([0, _height]);\n    x.domain(_data[\"file\"]);\n    let y_domain_elmns = _data[this.key].slice();\n    y_domain_elmns.push(_data[\"ctrl_\"+this.key]); // Get ctrl value as well\n    y_domain_elmns.push(0);\t\t    // Add zero\n    let y_domain = [Math.min.apply(Math, y_domain_elmns), Math.max.apply(Math, y_domain_elmns)];\n    if (y_domain[0] == y_domain[1]) {\n      y_domain[0] = y_domain[1] - 0.5; // If value 0 show zero.\n    }\n    y.domain(y_domain);\n\n    // x and y axis\n    this.cx.beginPath();\n    this.cx.lineWidth = 2;\n    this.cx.strokeStyle = \"#000000\";\n    this.cx.moveTo(this.offset.x, _height + this.offset.y);\n    this.cx.lineTo(this.offset.x + (x.padding() + x.bandwidth()) * (_data[this.key].length + 1), _height + this.offset.y);\n    this.cx.moveTo(this.offset.x, this.offset.y);\n    this.cx.lineTo(this.offset.x, this.offset.y + _height + 1);\n    this.cx.stroke();\n    this.cx.closePath();\n\n    // x ticks\n    this.cx.beginPath();\n    this.cx.fillStyle = \"#000000\";\n    this.cx.strokeStyle = \"#000000\";\n    let _this = this;\n    x.domain().forEach(function(d) {\n      _this.cx.moveTo(_this.offset.x + x(d) + x.bandwidth() / 2, _this.offset.y + _height);\n      _this.cx.lineTo(_this.offset.x + x(d) + x.bandwidth() / 2, _this.offset.y + _height + 6);\n      _this.cx.font=\"12px Open Sans\";\n      _this.cx.save();\n      _this.cx.translate(_this.offset.x + x(d) + x.bandwidth() / 2 , _this.offset.y + _height + 6);\n      _this.cx.rotate(-Math.PI/2);\n      _this.cx.translate( -1 * (_this.offset.x + x(d) + x.bandwidth() / 2) , -1 * (_this.offset.y + _height + 6));\n      _this.cx.textAlign = \"right\";\n      _this.cx.textBaseline = \"middle\";\n      _this.cx.fillText(d.split(\".\")[0], _this.offset.x + x(d) + x.bandwidth() / 2 , _this.offset.y + _height + 6);\n      _this.cx.restore();\n    });\n    _this.cx.strokeStyle = \"#000000\";\n    _this.cx.stroke();\n\n    // y ticks\n    y.ticks(10).forEach(function(d) {\n      _this.cx.moveTo(_this.offset.x, _this.offset.y + _height - y(d) + 0.5);\n      _this.cx.lineTo(_this.offset.x - 6, _this.offset.y + _height - y(d) + 0.5);\n      _this.cx.textAlign = \"right\";\n      _this.cx.textBaseline = \"middle\";\n      if(_this.key==\"percentage\"){\n\t_this.cx.fillText((d * 100).toExponential(1), _this.offset.x - 6, _this.offset.y + _height - y(d) + 0.5);\n      } else {\n\t_this.cx.fillText(d.toExponential(1), _this.offset.x - 6, _this.offset.y + _height - y(d) + 0.5);\n      }\n      \n    });\n    this.cx.strokeStyle = \"#000000\";\n    this.cx.stroke();\n\n    for (var i = 0; i < _data[this.key].length; i++) {\n      _this.cx.fillStyle = \"steelblue\";\n      _this.cx.rect(_this.offset.x + x(_data[\"file\"][i]), _this.offset.y + (_height - y(_data[_this.key][i])), x.bandwidth(), y(_data[_this.key][i]));\n      _this.cx.fill();\n    }\n    this.cx.beginPath();\n    this.cx.strokeStyle = \"#FF0000\";\n    this.cx.moveTo(this.offset.x, this.offset.y + (_height - y(_data[\"ctrl_\"+this.key])));\n    this.cx.lineTo(this.offset.x + _width, this.offset.y + (_height - y(_data[\"ctrl_\"+this.key])));\n    this.cx.stroke();\n  }\n\n  setUpCanvas(): void {\n    const canvasEl: HTMLCanvasElement = this.canvas.nativeElement;\n    this.canvasEl = canvasEl;\n    let dpr: number = window.devicePixelRatio || 1;\n    let rect = canvasEl.getBoundingClientRect();\n    canvasEl.width = (this.screenWidth/2 - 30) * dpr;\n    canvasEl.height = this.screenHeight/4 * dpr;\n    canvasEl.style.width = String(this.screenWidth/2 - 30)+\"px\";\n    canvasEl.style.height = String(this.screenHeight/4) + \"px\";\n    this.cx = canvasEl.getContext('2d');\n    this.cx.scale(dpr, dpr);\n  }\n\n}\n","export class Taxon {\n  constructor() {\n  }\n  tax_id: number;\n  taxon_name: string;\n  parent: string;\t\t// Change to number\n  depth: number;\n  rank: string;\n  ctrl_reads: number;\n  ctrl_taxon_reads: number;\n  ctrl_percentage: number;\n  ctrl_kmer_depth: number;\n  ctrl_kmer_coverage: number;\n  reads: [];\n  taxon_reads: [];\n  percentage: [];\n  pvalue: [];\n  oddsratio: [];\n  kmer_depth: [];\n  kmer_coverage: [];\n  file: [];\n  pathogenic: number;\n  diseases: [];\n  children: Taxon[];\n  num_nodes: number;\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\n\nimport * as _ from \"lodash\";\nimport * as d3 from 'd3';\n\nimport { HierarchyPointNode } from 'd3-hierarchy'\n\nimport { Taxon } from './taxon';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TaxonomyTreeService {\n\n  private reportUrl = \"./assets/json-reports/test.json\";\n  private jsonData: Taxon = new Taxon();\n\n  constructor(\n    private http: HttpClient\n  ) { }\n\n  private handleError<T>(operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n      console.error(error);\n      console.log(`${operation} failed: ${error.message}`);\n      return of(result as T);\n    };\n  }\n\n  getTree(): Observable<any> {\n    return this.http.get<any>(this.reportUrl)\n      .pipe(\n        tap(d => this.jsonData = d),\n        catchError(this.handleError('getTree', []))\n      );\n  }\n\n  getLayout(data: Taxon, height: number, width: number, offsetX: number, offsetY: number, depth: number): HierarchyPointNode<Taxon>[] {\n    let root = d3.hierarchy(data, function(d) { return d.children; });\n    let tree_layout = d3.cluster<Taxon>().size([height - offsetX * 2, width - offsetY * 2]);\n    let tree = tree_layout(root);\n    let nodes = tree.descendants();\n    nodes.forEach(function(d) {\n      if (d.parent == null)\n        d.y = offsetX;\n      else if (d.data.tax_id == -1) // compressd nodes\n        d.y = d.parent.y + 40;\n      else\n        d.y = d.parent.y + depth;\n      d.x += offsetY;\n    });\n    return nodes;\n  }\n\n  filterTaxonomyTree(d: Taxon, minReads: number, sigLevel: number, minOddsRatio: number): boolean {\n    let cond = [], keep_node: boolean = false, tmp, _this = this;\n    // Minimum number of reads\n    keep_node = d.taxon_reads.some(function(x) {\n      return x >= minReads;\n    });\n    cond.push(keep_node);\n    // Maximum pvalue\n    keep_node = d.pvalue.some(function(x) {\n      return x <= sigLevel;\n    });\n    cond.push(keep_node);\n    // Minimum odds ratio\n    keep_node = d.oddsratio.some(function(x) {\n      return x >= minOddsRatio;\n    });\n    cond.push(keep_node);\n    keep_node = cond.every(function(x) {\n      return x;\n    });\n    cond = [keep_node];\n    if (d.children != null) {\n      for (var i = 0; i < d.children.length; i++) {\n        tmp = this.filterTaxonomyTree(d.children[i], minReads, sigLevel, minOddsRatio);\n        cond.push(tmp);\n        if (!tmp) {\n          d.children.splice(i, 1);\n          i--;\n        }\n      }\n    }\n    keep_node = cond.some(function(x) {\n      return x;\n    });\n    return keep_node;\n  }\n\n  filterBasedOnAnnotations(d: Taxon, key: string, minReads: number, sigLevel: number, minOddsRatio: number): boolean {\n    let cond = [], keep_node: boolean = false, tmp, _this = this;\n    // Minimum number of reads\n    keep_node = d.taxon_reads.some(function(x) {\n      return x >= minReads;\n    });\n    cond.push(keep_node);\n    // Maximum pvalue\n    keep_node = d.pvalue.some(function(x) {\n      return x <= sigLevel;\n    });\n    cond.push(keep_node);\n    // Minimum odds ratio\n    keep_node = d.oddsratio.some(function(x) {\n      return x >= minOddsRatio;\n    });\n    cond.push(keep_node);\n    keep_node = (d[key] == 1);\n    cond.push(keep_node);\n    keep_node = cond.every(function(x) {\n      return x;\n    });\n    cond = [keep_node];\n    if (d.children != null) {\n      for (var i = 0; i < d.children.length; i++) {\n        tmp = this.filterBasedOnAnnotations(d.children[i], key, minReads, sigLevel, minOddsRatio);\n        cond.push(tmp);\n        if (!tmp) {\n          d.children.splice(i, 1);\n          i--;\n        }\n      }\n    }\n    keep_node = cond.some(function(x) {\n      return x;\n    });\n    return keep_node;\n  }\n\n  compressNodesBasedOnAnnotation(d: Taxon, key: string): void {\n    if (d[key] == 0 && d.depth > 1) {\n      d.taxon_name = \"Compressed\";\n      d.tax_id = -1;\n      d.num_nodes = 1;\n      while (!d.children.every(function(x) { return (x[key] == 1); })) {\n        for (var i = 0; i < d.children.length; i++) {\n          if (d.children[i][key] == 0) {\n            if (d.children[i].children != null)\n              d.children = d.children.concat(d.children[i].children);\n            d.children.splice(i, 1);\n            d.num_nodes += 1;\n            i--;\n          }\n        }\n      }\n    }\n    for (var i = 0; i < d.children.length; i++) {\n      this.compressNodesBasedOnAnnotation(d.children[i], key);\n    }\n  }\n\n  filterPathogenic(minReads: number, sigLevel: number, minOddsRatio: number): Taxon {\n    let data = _.cloneDeep(this.jsonData);\n    this.filterBasedOnAnnotations(data, \"pathogenic\", minReads, sigLevel, minOddsRatio);\n    this.compressNodesBasedOnAnnotation(data, \"pathogenic\");\n    console.log(data);\n    return data;\n  }\n\n  setViewPort(tax_id: number = 1): Taxon[] {\n    let data: Taxon = _.cloneDeep(this.jsonData);\n    let path_to_root: Taxon[] = this.getPathToNode(data, tax_id);\n    this.removeChildrenAtDepth(path_to_root[path_to_root.length - 1]);\n    return path_to_root;\n  }\n\n  getRangeOfKeyAtDepth(_data: Taxon, key: string, depth: number, min?: number[], max?: number[]): [number[], number[]] {\n    if (min == null || max == null) {\n      min = Array(_data[key].length).fill(Infinity);\n      max = Array(_data[key].length).fill(-1);\n    }\n    if (_data.depth == depth) {\n      for (let i = 0; i < _data[key].length; i++) {\n        min[i] = (_data[key][i] < min[i]) ? _data[key][i] : min[i];\n        max[i] = (_data[key][i] > max[i]) ? _data[key][i] : max[i];\n      }\n    }\n    var m;\n    if (_data.children == null || _data.depth > depth) {\n      return [min, max];\n    }\n    for (let i = 0; i < _data.children.length; i++) {\n      m = this.getRangeOfKeyAtDepth(_data.children[i], key, depth, min, max);\n      min = m[0];\n      max = m[1];\n    }\n    return [min, max];\n  }\n\n  removeChildrenAtDepth(node: Taxon, depth: number = 2): boolean {\n    if (depth == 0) {\n      delete node.children;\n      return true;\n    }\n    for (var i = 0; i < node.children.length; i++) {\n      this.removeChildrenAtDepth(node.children[i], depth - 1);\n    }\n  }\n\n  getPathToNode(node: Taxon, tax_id: number, path_root: Taxon[] = []): Taxon[] {\n    if (node.tax_id == tax_id) {\n      path_root.push(node);\n      return path_root;\n    }\n    if (node.children != null) {\n      let t: Taxon[];\n      for (var i = 0; i < node.children.length; i++) {\n        t = this.getPathToNode(node.children[i], tax_id, path_root);\n        if (t.length != 0) {\n          t.unshift(node);\n          return t;\n        }\n      }\n    }\n    return path_root;\n  }\n}\n","module.exports = \"#wrapper{\\n    width:100%;\\n    height: 600px;\\n}\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdGF4b25vbXktdmlldy90YXhvbm9teS12aWV3LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxXQUFXO0lBQ1gsY0FBYztDQUNqQiIsImZpbGUiOiJzcmMvYXBwL3RheG9ub215LXZpZXcvdGF4b25vbXktdmlldy5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiI3dyYXBwZXJ7XG4gICAgd2lkdGg6MTAwJTtcbiAgICBoZWlnaHQ6IDYwMHB4O1xufVxuIl19 */\"","module.exports = \"<div class=\\\"row\\\">\\n  <div class=\\\"col-md-8\\\">\\n    <canvas #wrapper id=\\\"wrapper\\\" (click)=\\\"onCanvasClick($event)\\\" (mousemove)=\\\"onCanvasHover($event)\\\">\\n    </canvas>\\n  </div>\\n  <div class=\\\"col-md-4\\\">\\n    <nav aria-label=\\\"breadcrumb\\\">\\n      <ol class=\\\"breadcrumb\\\">\\n\\t<li *ngFor=\\\"let t of pathToRoot\\\" (click)=\\\"drawCanvas(t.tax_id)\\\" class=\\\"breadcrumb-item\\\"><a href=\\\"#\\\" onclick=\\\"return false;\\\">{{t.taxon_name}}</a></li>\\n      </ol>\\n    </nav>\\n    <form>\\n      <div class=\\\"form-row\\\">\\n\\t<div class=\\\"form-group col-md-4\\\">\\n\\t  <label for=\\\"minReads\\\">Minimum read count</label>\\n\\t  <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"minReads\\\" placeholder=\\\"Minimum number of reads\\\" [(ngModel)]=\\\"minReads\\\" name=\\\"minReads\\\">\\n\\t</div>\\n\\t<div class=\\\"form-group col-md-4\\\">\\n\\t  <label for=\\\"minOR\\\">Minimum odds ratio</label>\\n\\t  <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"minOR\\\" placeholder=\\\"Minimum odds ratio\\\" [(ngModel)]=\\\"minOddsRatio\\\" name=\\\"minOR\\\">\\n\\t</div>\\n\\t<div class=\\\"form-group col-md-4\\\">\\n\\t  <label for=\\\"sigLevel\\\">Significance Level</label>\\n\\t  <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"sigLevel\\\" placeholder=\\\"Significance Level\\\" [(ngModel)]=\\\"sigLevel\\\" name=\\\"sigLevel\\\">\\n\\t</div>\\t\\n      </div>\\n      <div class=\\\"form-row\\\">\\n\\t<div class=\\\"col-md-6\\\">\\n\\t  <button class=\\\"btn btn-primary mb-2\\\" (click)=\\\"drawCanvas(taxonomyTree.tax_id)\\\">Filter</button>\\n\\t</div>\\n\\t<div class=\\\"col-md-6\\\">\\n\\t  <button class=\\\"btn btn-primary mb-2\\\" (click)=\\\"showPathogenic()\\\">Show Pathogenic</button>\\n\\t</div>\\n      </div>\\n    </form>\\n    <h3><span class=\\\"badge badge-light\\\">{{currentNode.taxon_name}}</span></h3>\\n    <app-node-bar-chart [screenHeight]=\\\"screenHeight\\\" [screenWidth]=\\\"screenWidth\\\" [nodeData]=\\\"currentNode\\\" key=\\\"percentage\\\"></app-node-bar-chart>\\n    <app-node-bar-chart [screenHeight]=\\\"screenHeight\\\" [screenWidth]=\\\"screenWidth\\\" [nodeData]=\\\"currentNode\\\" key=\\\"taxon_reads\\\"></app-node-bar-chart>\\n    <app-node-bar-chart [screenHeight]=\\\"screenHeight\\\" [screenWidth]=\\\"screenWidth\\\" [nodeData]=\\\"currentNode\\\" key=\\\"kmer_coverage\\\"></app-node-bar-chart>\\n    <app-node-bar-chart [screenHeight]=\\\"screenHeight\\\" [screenWidth]=\\\"screenWidth\\\" [nodeData]=\\\"currentNode\\\" key=\\\"kmer_depth\\\"></app-node-bar-chart>\\n  </div>\\n</div>\\n\"","import { Component, OnInit, AfterViewInit, HostListener, ViewChild, ElementRef, Input } from '@angular/core';\nimport { NodeBarChartComponent } from '../node-bar-chart/node-bar-chart.component';\n\nimport { TaxonomyTreeService } from '../taxonomy-tree.service';\n\nimport { Taxon } from '../taxon';\n\nimport { HierarchyPointNode } from 'd3-hierarchy';\nimport { Selection } from 'd3-selection';\nimport { ScaleSequential } from 'd3-scale';\n\nimport * as d3 from 'd3';\n\n@Component({\n  selector: 'app-taxonomy-view',\n  templateUrl: './taxonomy-view.component.html',\n  styleUrls: ['./taxonomy-view.component.css']\n})\nexport class TaxonomyViewComponent implements AfterViewInit, OnInit {\n\n  @ViewChild('wrapper') private canvas: ElementRef;\n\n  private screenWidth = 100;\n  private screenHeight = 100;\n\n  private minReads: number = 10;\n  private sigLevel: number = 0.05;\n  private minOddsRatio: number = 1;\n\n  // Styles\n  private nodeSize: number = 5;\n  private strokeWidth: number = 2;\n  private colorScheme: { [element: string]: string } =  {\n    \"fill\": \"#4682b4\",\n    \"hover_fill\": \"#86C67C\",\n    \"compressed_fill\": \"#FF0000\",\n    \"compressed_text_fill\": \"#FFFFFF\",\n    \"stroke_style\": \"#000000\",\n    \"text_fill\": \"#000000\",\n    \"link_stroke_style\": \"#000000\"\n  };\n\n  private scales: {[id: string]: [ScaleSequential<any>, ScaleSequential<any>]} = {\n    \"percentage\": [null, null]\n  };\n\n  private canvasOffset: {[element: string]: number} = {\n    \"x\": 50,\n    \"y\": 0\n  }\n  \n  private heatmap: {[element: string]: number} = {\n    \"square_size\": 10\n  }\n  \n\n  private cx: CanvasRenderingContext2D;\n  private canvasEl: HTMLCanvasElement;\n\n  private taxonomyTree: Taxon = new Taxon();\n  private currentNode: Taxon = new Taxon();\n  private treeDescendants: HierarchyPointNode<Taxon>[];\n  private pathToRoot: Taxon[] = [];\n  private canvasWrapper;\n\n  constructor(\n    private taxonomyTreeService: TaxonomyTreeService\n  ) { }\n\n  ngOnInit(){\n    this.getScreenSize(); // On init since value passed to node-bar-chart component\n  }\n\n  ngAfterViewInit(){\n    this.setUpCanvas();\n    this.canvasWrapper = d3.select(\"#wrapper\");\n    this.taxonomyTreeService.getTree().subscribe(_ => this.drawCanvas(1));\n  }\n\n  @HostListener('window:resize', ['$event'])\n  getScreenSize(event?) {\n    this.screenHeight = window.innerHeight;\n    this.screenWidth = window.innerWidth;\n  }\n\n  drawCanvas(tax_id: number): void {\n    let t: Taxon[] = this.taxonomyTreeService.setViewPort(tax_id);\n    this.pathToRoot = t;\n    this.taxonomyTree = t[t.length-1];\n    this.taxonomyTreeService.filterTaxonomyTree(this.taxonomyTree, this.minReads, this.sigLevel, this.minOddsRatio);\n    this.currentNode = this.taxonomyTree;\n    this.treeDescendants = this.taxonomyTreeService.getLayout(this.taxonomyTree, this.screenHeight, this.screenWidth * (2/3), this.canvasOffset.x, this.canvasOffset.y, this.screenWidth * (1/6));\n    this.update();\n  }\n\n  showPathogenic(): void {\n    this.taxonomyTree = this.taxonomyTreeService.filterPathogenic(this.minReads, this.sigLevel, this.minOddsRatio);\n    this.taxonomyTreeService.filterTaxonomyTree(this.taxonomyTree, this.minReads, this.sigLevel, this.minOddsRatio);\n    this.pathToRoot = [this.taxonomyTree];\n    this.currentNode = this.taxonomyTree;\n    this.treeDescendants = this.taxonomyTreeService.getLayout(this.taxonomyTree, this.screenHeight, this.screenWidth *(2/3), this.canvasOffset.x, this.canvasOffset.y, this.screenWidth * (1/12));\n    this.update();\n  }\n\n  onCanvasClick(event): void {\n    let _y = event.clientX - this.canvasEl.getBoundingClientRect()[\"x\"];\n    let _x = event.clientY - this.canvasEl.getBoundingClientRect()[\"y\"];\n    let _this = this;\n    d3.selectAll(\"custom-node\")\n      .each(function(d: HierarchyPointNode<Taxon>){\n\tif(_this.checkWithinRadius([d.y, d.x], [_y, _x], _this.nodeSize + _this.strokeWidth)){\n\t  if(d.data.tax_id != -1) // Avoid compressed nodes\n\t    _this.drawCanvas(d.data.tax_id);\n\t}\n      })\n  }\n\n  onCanvasHover(event): void {\n    let _y = event.clientX - this.canvasEl.getBoundingClientRect()[\"x\"];\n    let _x = event.clientY - this.canvasEl.getBoundingClientRect()[\"y\"];\n    let _this = this;\n    let hoverEvent: boolean = false;\n    d3.selectAll(\"custom-node\")\n      .each(function(d: HierarchyPointNode<Taxon>){\n\tif(_this.checkWithinRadius([d.y, d.x], [_y, _x], _this.nodeSize + _this.strokeWidth)){\n\t  if(d3.select(this).attr(\"_fill\") == null)\n\t    d3.select(this).attr(\"_fill\", String(d3.select(this).attr(\"fill\")));\n\t  d3.select(this).attr(\"fill\", _this.colorScheme[\"hover_fill\"]);\n\t  if(d.data.tax_id!=-1) // Avoid hover oncompressed nodes\n\t    _this.currentNode = d.data;\n\t  _this.canvasEl.style.cursor = \"pointer\";\n\t  hoverEvent = true;\n\t} else if(d3.select(this).attr(\"_fill\") != null) {\n\t  d3.select(this).attr(\"fill\", d3.select(this).attr(\"_fill\"));\n\t}\n      });\n    if(!hoverEvent)\n      this.canvasEl.style.cursor = \"auto\";\n    this.renderCanvas();\n  }\n\n  checkWithinRadius(p1: [number, number], p2: [number, number], r: number): boolean {\n    let a = (p1[0] - p2[0])**2 + (p1[1] - p2[1])**2;\n    a = Math.sqrt(a);\n    return (a <= r);\n  }\n\n  drawHeatmap(nodeEl, d: HierarchyPointNode<Taxon>, key: string): void{\n    var start_x = parseFloat(nodeEl.attr(\"x\")) + this.heatmap.square_size,\n    start_y = parseFloat(nodeEl.attr(\"y\"));\n    if(d.children !=null){\n      start_x = parseFloat(nodeEl.attr(\"x\")) - (this.heatmap.square_size * d.data[key].length)/2;\n      start_y = start_y + 22;\n    }\n    for (var i = 0; i < d.data[key].length; i++) {\n      if(d.children == null){\n\tthis.cx.fillStyle = this.scales[key][1](d.data[key][i]);\n      } else if (d.children.every(function(x){ return (x.children == null); })) {\n\tthis.cx.fillStyle = this.scales[key][0](d.data[key][i]);\n      } else {\n\tcontinue;\n      }\n      this.cx.beginPath();\n      this.cx.moveTo(start_x + (this.heatmap.square_size * i), start_y - (this.heatmap.square_size/2));\n      this.cx.rect(start_x + (this.heatmap.square_size * i), start_y - (this.heatmap.square_size/2), this.heatmap.square_size, this.heatmap.square_size);\n      this.cx.fill();\n      this.cx.strokeStyle = \"#000000\";\n      this.cx.stroke();\n      this.cx.closePath();\n    }\n  }\n\n  update(): void {\n    let _this = this;\n    let nodes = this.treeDescendants;\n    let links: HierarchyPointNode<Taxon>[]  = this.treeDescendants.slice(1);\n\n    let duration = 300;\n    let node = this.canvasWrapper.selectAll(\"custom-node\").data(nodes);\n\n    let node_enter = node.enter()\n      .append(\"custom-node\")\n      .classed(\"node\", true)\n      .attr(\"x\", function(d){\n\treturn d.y;\n      })\n      .attr(\"y\", function(d){\n\treturn d.x;\n      })\n      .text(function(d){\n\tif(d.data.tax_id == -1)\n\t  return String(d.data.num_nodes);\n\treturn d.data[\"taxon_name\"];\n      })\n      .attr(\"size\", function(d){\n\tif(d.data.tax_id == -1)\n\t  return _this.nodeSize * 2.5;\n\treturn _this.nodeSize;\n      })\n      .attr(\"fill\", function(d){\n\tif(d.data.tax_id == -1)\n\t  return _this.colorScheme[\"compressed_fill\"];\n\treturn _this.colorScheme.fill;\n      })\n      .attr(\"text_fill\", function(d){\n\tif(d.data.tax_id == -1)\n\t  return _this.colorScheme[\"compressed_text_fill\"];\n\treturn _this.colorScheme.fill;\n      })\n      .attr(\"stroke_style\", this.colorScheme[\"stroke_style\"])\n      .attr(\"text_fill\", this.colorScheme[\"text_fill\"])\n      .attr(\"line_width\", this.strokeWidth)\n      .attr(\"_fill\", null);\n\n    let node_update = node_enter.merge(node);\n\n    node_update\n      .attr(\"x\", function(d){\n\treturn d.y;\n      })\n      .attr(\"y\", function(d){\n\treturn d.x;\n      })\n      .text(function(d){\n\tif(d.data.tax_id == -1)\n\t  return String(d.data.num_nodes)\n\treturn d.data[\"taxon_name\"];\n      })\n      .attr(\"text_fill\", function(d){\n\tif(d.data.tax_id == -1)\n\t  return _this.colorScheme[\"compressed_text_fill\"];\n\treturn _this.colorScheme.fill;\n      })\n      .attr(\"size\", function(d){\n\tif(d.data.tax_id == -1)\n\t  return _this.nodeSize * 2;\n\treturn _this.nodeSize;\n      })\n      .attr(\"fill\", function(d){\n\tif(d.data.tax_id == -1)\n\t  return _this.colorScheme[\"compressed_fill\"];\n\treturn _this.colorScheme.fill;\n      })\n      .attr(\"_fill\", null);\n    \n    let node_exit = node.exit()\n      .remove();\n\n    let link = this.canvasWrapper.selectAll(\"custom-link\").data(links);\n\n    let linkEnter = link.enter()\n      .append(\"custom-link\")\n      .classed(\"link\", true)\n      .attr(\"sx\", function(d){\n    \treturn d.parent.y;\n      })\n      .attr(\"sy\", function(d){\n    \treturn d.parent.x;\n      })\n      .attr(\"tx\", function(d){\n    \treturn d.y;\n      })\n      .attr(\"ty\", function(d){\n    \treturn d.x;\n      })\n      .attr(\"line_width\", this.strokeWidth)\n      .attr(\"stroke_style\", this.colorScheme[\"link_stroke_style\"]);\n\n    let linkUpdate = linkEnter.merge(link);\n\n    linkUpdate\n      .transition()\n      .duration(duration)\n      .attr(\"sx\", function(d){\n    \treturn d.parent.y;\n      })\n      .attr(\"sy\", function(d){\n    \treturn d.parent.x;\n      })\n      .attr(\"tx\", function(d){\n    \treturn d.y;\n      })\n      .attr(\"ty\", function(d){\n    \treturn d.x;\n      });\n\n    let linkExit = link.exit()\n      .transition()\n      .duration(duration)\n      .attr(\"sx\", function(d){\n    \treturn d.parent.y;\n      })\n      .attr(\"sy\", function(d){\n    \treturn d.parent.x;\n      })\n      .attr(\"tx\", function(d){\n    \treturn d.parent.y;\n      })\n      .attr(\"ty\", function(d){\n    \treturn d.parent.x;\n      })\n      .remove();\n\n    let m1: [number[], number[]] = this.taxonomyTreeService.getRangeOfKeyAtDepth(this.taxonomyTree, \"percentage\", this.taxonomyTree.depth + 1);\n    let m2: [number[], number[]] = this.taxonomyTreeService.getRangeOfKeyAtDepth(this.taxonomyTree, \"percentage\", this.taxonomyTree.depth + 2);\n\n    this.scales[\"percentage\"][0] = d3.scaleSequential(d3.interpolateGreens)\n      .domain([Math.min.apply(Math, m1[0]), Math.max.apply(Math, m1[1])]);\n    this.scales[\"percentage\"][1] = d3.scaleSequential(d3.interpolateBlues)\n      .domain([Math.min.apply(Math, m2[0]), Math.max.apply(Math, m2[1])]);\n\n    let t = d3.timer(function(elapsed) {\n      _this.renderCanvas();\n      if (elapsed > duration + (2 * duration)) t.stop();\n    });\n  }\n\n  renderCanvas(): void {\n    let _this = this;\n    let tx: number, ty:number, sx: number, sy:number;\n    this.cx.clearRect(0, 0, this.screenWidth *(2/3), this.screenHeight);\n    this.canvasWrapper.selectAll(\"custom-link\").each(function(d){\n      let _link: Selection<any, any, any, any> = d3.select(this);\n      _this.cx.beginPath();\n      sx = parseFloat(_link.attr(\"sx\"));\n      sy = parseFloat(_link.attr(\"sy\"));\n      tx = parseFloat(_link.attr(\"tx\"));\n      ty = parseFloat(_link.attr(\"ty\"));\n      _this.cx.moveTo(sx, sy);\n      _this.cx.lineTo(0.5 * (tx + sx), sy);\n      _this.cx.lineTo(0.5 * (tx + sx), ty);\n      _this.cx.lineTo(tx, ty);\n      _this.cx.strokeStyle = _link.attr(\"stroke-style\");\n      _this.cx.lineWidth = parseFloat(_link.attr(\"line-width\"));\n      _this.cx.stroke();\n      _this.cx.closePath();\n    });\n\n    this.canvasWrapper.selectAll(\"custom-node\").each(function(d){\n      let _node = d3.select(this), x: number, y:number;\n      x = parseFloat(_node.attr(\"x\"));\n      y = parseFloat(_node.attr(\"y\"));\n      _this.cx.moveTo(x, y);\n      _this.cx.beginPath();\n      _this.cx.arc(x, y, parseFloat(_node.attr(\"size\")), 0, 2 * Math.PI);\n      _this.cx.fillStyle =  _node.attr(\"fill\");\n      _this.cx.lineWidth = parseFloat(_node.attr(\"line-width\"));\n      _this.cx.strokeStyle = _node.attr(\"stroke-style\");\n      _this.cx.fill();\n      _this.cx.stroke();\n      _this.cx.closePath();\n      _this.cx.beginPath();\n      _this.cx.font = \"18px Open Sans\";\n      _this.cx.fillStyle = _node.attr(\"text_fill\");\n      if(d.data.tax_id == -1){\n\t_this.cx.textAlign = \"center\";\n\t_this.cx.textBaseline = 'middle';\n\t_this.cx.fillText(_node.text(), x, y);\n      } else if(d.children!=null){\n\t_this.cx.textAlign = \"center\";\n\t_this.cx.textBaseline = 'middle';\n\t_this.cx.fillText(_node.text(), x, y + parseFloat(_node.attr(\"size\")) + 5);\n      } else {\n\t_this.cx.textAlign = \"left\";\n\t_this.cx.textBaseline = 'middle';\n\t_this.cx.fillText(_node.text(), x + _this.heatmap.square_size * (d.data.percentage.length + 1) + parseFloat(_node.attr(\"size\")), y);\n      }\n      _this.cx.fill();\n      _this.cx.closePath();\n      if(d.depth > 0 && d.data.tax_id != -1){\n\t_this.drawHeatmap(_node, d, \"percentage\");\n      }\n    });\n    // this.canvasWrapper.selectAll(\"custom-node\").each(function(d){\n    //   var _node = d3.select(this);\n    //   if(_node.attr(\"hover-status\")==\"active\"){\n    // \tdraw_hover(d, [\"percentage\", \"taxon_reads\", \"kmer_depth\", \"kmer_coverage\"]);\n    //   }\n    // });\n  }\n\n  setUpCanvas(): void {\n    const canvasEl: HTMLCanvasElement = this.canvas.nativeElement;\n    this.canvasEl = canvasEl;\n    let dpr: number = window.devicePixelRatio || 1;\n    let rect = canvasEl.getBoundingClientRect();\n    canvasEl.width = (this.screenWidth * (2/3) - 30) * dpr;\n    canvasEl.height = this.screenHeight * dpr;\n    // canvasEl.style.width = String(this.screenWidth/2 - 30)+\"px\";\n    canvasEl.style.height = String(this.screenHeight) + \"px\";\n    this.cx = canvasEl.getContext('2d');\n    this.cx.scale(dpr, dpr);\n  }\n}\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":""}